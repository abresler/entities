% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/resolve.R
\name{ent_match_with_rules}
\alias{ent_match_with_rules}
\title{Match entities using custom rules}
\usage{
ent_match_with_rules(x, y = NULL, rules, threshold = 0.8, max_matches = NULL)
}
\arguments{
\item{x}{First tibble containing entities to match}

\item{y}{Second tibble containing entities to match against.
If NULL, performs self-matching (deduplication) on x.}

\item{rules}{An entity_rules object created by \code{\link{entity_rules}}}

\item{threshold}{Minimum combined score to consider a match (0-1). Default 0.80.}

\item{max_matches}{Maximum number of matches to return per entity in x.
NULL (default) returns all matches above threshold.}
}
\value{
A tibble with columns:
  \describe{
    \item{id_x}{Row index from x}
    \item{id_y}{Row index from y}
    \item{score}{Combined similarity score}
    \item{...}{Per-field similarity scores (named as field_sim)}
  }
}
\description{
Performs entity matching using a custom rules specification created by
\code{\link{entity_rules}}. Computes per-field similarities and combines
them according to the specified strategy.
}
\examples{
\dontrun{
# Create sample data
companies_a <- tibble::tibble(
  name = c("Apple Inc", "Microsoft Corp"),
  city = c("Cupertino", "Redmond")
)

companies_b <- tibble::tibble(
  name = c("APPLE INCORPORATED", "MSFT Corporation", "Google LLC"),
  city = c("Cupertino", "Redmond", "Mountain View")
)

# Define matching rules
rules <- entity_rules(
  name = list(method = "jw", weight = 0.7, threshold = 0.80),
  city = list(method = "exact", weight = 0.3)
)

# Find matches
matches <- ent_match_with_rules(companies_a, companies_b, rules)
}
}
